@* Get the EmployeeData *@

@using Microsoft.EntityFrameworkCore;
@using Employees.Data

@inject IDbContextFactory<EmployeeDataContext> EmployeeDataContextFactory

@page "/"

<PageTitle>Our Employees!</PageTitle>

@if (ShowCreate)
{
    <h3>Add a new employee</h3>
    <div class="row mb-3">

        <label for="firstname" class="col-4 col-form-label">First Name</label>
        <div class="col-8">
            <input id="firstname" name="firstName" type="text" class="form-control" @bind="@NewEmployee.FirstName" />
        </div>
    </div>

    <div class="row mb-3">

        <label for="lastname" class="col-4 col-form-label">Last Name</label>
        <div class="col-8">
            <input id="lastname" name="lastName" type="text" class="form-control" @bind="@NewEmployee.LastName" />
        </div>
    </div>


    <div class="row mb-3">

        <label for="email" class="col-4 col-form-label">Email</label>
        <div class="col-8">
            <input id="email" name="email" type="text" class="form-control" @bind="@NewEmployee.Email" />
        </div>
    </div>


    <div class="row mb-3">

        <label for="department" class="col-4 col-form-label">Department</label>
        <div class="col-8">
            <input id="department" name="department" type="text" class="form-control" @bind="@NewEmployee.Department" />
        </div>
    </div>


    <div class="form-group row mb-3">

        <label for="avatar" class="col-4 col-form-label">Avatar</label>
        <div class="col-8">
            <input id="avatar" name="avatar" type="text" class="form-control" @bind="@NewEmployee.Avatar" />
        </div>
    </div>


    <div class="form-group row mb-3">

        <div class="offset-4 col-8">
            <button name="submit" type="submit" class="btn btn-primary" @onclick="CreateNewEmployee">Submit</button>
        </div>
    </div>
} else
{
    <div class="form-group row mb-3">
        <div class="offset-4 col-8">
            <button name="submit" type="submit" class="btn btn-primary" @onclick="ShowCreateForm">Add a New Employee</button>
        </div>
    </div>

    <p>SHOW THE LIST</p>

  
}


@if (@OurEmployees is not null && @OurEmployees.Count > 0)
{
    <table class="table">
        <thead>
            <tr>
                <th scope="col">ID</th>
                <th scope="col">First Name</th>
                <th scope="col">Last Name</th>
                <th scope="col">Email</th>
                <th scope="col">Department</th>
                <th scope="col">Avatar</th>
                <th scope="col">Edit</th>
                <th scope="col">Delete</th>
            </tr>
        </thead>
        <tbody>
            @for (int i = 0; i < @OurEmployees.Count; i++)
            {
                <tr>
                    <th scope="row">@OurEmployees[i].Id</th>
                    <td>@OurEmployees[i].FirstName</td>
                    <td>@OurEmployees[i].LastName</td>
                    <td>@OurEmployees[i].Email</td>
                    <td>@OurEmployees[i].Department</td>
                    <td><img src="@OurEmployees[i].Avatar" width="50" height="50" /></td>

                </tr>

            }

        </tbody>
    </table>
}
